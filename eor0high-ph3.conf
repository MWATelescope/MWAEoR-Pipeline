params {
    // nextflow run main.nf -profile dug -with-tower -c eor0high-ph3.conf -entry asvoRawFlow --obsids_suffix=-eor0high20250908

    filter_sweet_pointings = null // list of sweet pointings to filter on
    // filter_ew_pointings = [-2, -1, +0, +1, +2, +3] // list of east-west pointings to filter on, ewp{-3,3} has bad RMS CONVG
    filter_ew_pointings = null
    filter_bad_tile_frac = null
    filter_min_good_tiles = 1 // filter obs with less than 88 good antennas
    filter_dead_dipole_frac = null // filter obs with too many dead dipoles
    filter_quality = 1 // filter obs with data quality issues
    filter_config = null // filter by array configuration, e.g. ['Phase II Compact']
    filter_eorfield = null // filter by eor field (0=eor0)
    filter_eorband = null // filter by eor band (1=high)
    filter_ra = null // filter by phase centre right ascention
    filter_dec = null // filter by phase centre declination
    filter_ionoqa = null // no ionoqa filter because
    filter_sun_elevation = null // filter by sun elevation

    noManualFlags = true
    noppds = true // ppds are not a thing in ph3

    pullPrep = false
    // no preprocessor averaging
    prep_time_res_s = null
    prep_freq_res_khz = null
    van_vleck = false
    // no edge flagging
    prep_edge_width = null
    // --flag-fine-chans 0
    // birli_args = '--passband-gains=none'
    prep_rfi = 0

    flag_occupancy_threshold = 0.5 // total fraction of flagged cells (times, baselines, channels)
    rfi_occupancy_threshold = 0.03 // total fraction of flagged cells (from aoflagger), not including flagged antennae, times, channels

    ssins_apply = true
    ssins_occupancy_threshold = 0.53
    ssins_narrow_threshold = 0.6
    ssins_dab_threshold = 0.1
    ssins_streak_threshold = 0.51

    // /// //
    // CAL //
    // /// //
    cal_suffix = "_norfi"

    filter_max_rms_convg = 1e-6 // arbitrary

    noPrepFlags = false
    noCalFlags = false
    pullCalSol = false

    // high fidelity calibration
    hyp_srclist_args = '--source-dist-cutoff=180 --veto-threshold 0.005'
    dical_name = "30l_src8k_300it"
    // freq-average is needed when using the interpolated beam because not enough memory in tesla v100
    dical_args = "-n 8000 --uvw-min 30l --max-iterations 300 --stop-thresh 1e-20 --freq-average 40kHz"
    sourcelist = "/data/curtin_mwaeor/srclist_pumav3_EoR0LoBES_EoR1pietro_CenA-GP_2023-11-07.yaml"
    beam_path = "/data/curtin_mwaeor/MWA_embedded_element_pattern_rev2_interp_167_197MHz.h5"

    noeor = false
    // noapply = true

    // average when applying calibration solutions (otherwise peel takes forever)
    apply_time_res = 8
    apply_freq_res = 80

    // /// //
    // SUB //
    // /// //

    // only look at ionosub
    nosub = true
    noionosub = false

    hyp_peel_args = '--num-passes 5 --num-loops 6 --convergence 0.5'
    sub_nsrcs = 8000
    ionosub_nsrcs = 1000

    filter_max_hyp_ionoqa = null // filter by hyperdrive ionoqa

    // /// //
    // IMG //
    // /// //

    // noimgcombine = false // combine groups into a single image
    // img_split_coarse_chans = true // split the combined image by coarse channel
    noimg = true
    img_suffix='-allsky-wb0.5-4096x105as-dc10k'
    wsclean_args="-parallel-gridding 12"
    wsclean_dconv_args='-multiscale -mf-weighting' // -use-wgridder?
    img_size=4096
    img_scale='105asec'
    img_weight='briggs 0.5'
    chgcentre_args='-minw'
    img_channels_out='1'
    img_split_intervals=false
    nodeconv = false
    noimgcombine = true
    img_niter=10000

    filter_max_vrms_box = null // was 0.009490: 3 sigma, filter images with too much stokes V RMS
    filter_max_pks_int_v_ratio = 0.0035 // !! 0.003397 // 3 sigma, filter images with too much integrated pks V power compared to (XX+YY)
    filter_max_pks_int_diff = 0.3710 // 3 sigma, filter images with too much difference between xx and yy integrated pks flux
    filter_max_pks_int_sub_ratio = 0.1312 // 3 sigma, filter images which don't subtract enough integrated pks flux
    filter_max_pks_int_sub = null // filter subtracted images which have too much integrated pks flux


    // ///// //
    // PSPEC //
    // ///// //

    noeor = false
    nopsmetrics = false
    nodelayspec = false
    nopowerspec = false
    noplotvisqa = false
    nochips = false
    noplotchips = false
    lssa_bias_mode = 0

    novideo = false // make videos
    // noautoplot = true // don't make autoplots

    // archive = true // archive the results to acacia

    nodemo = false
}